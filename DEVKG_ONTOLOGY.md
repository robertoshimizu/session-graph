# DevKG Ontology Reference

## 1. Overview

**DevKG** (Dev Knowledge Graph) is a minimal OWL ontology for modeling developer knowledge extracted from AI-assisted coding sessions. Rather than inventing a custom vocabulary, it **composes five battle-tested W3C/ISO standards**:

| Standard | Role in DevKG |
|---|---|
| **PROV-O** | Provenance backbone -- who did what, when, derived from what |
| **SIOC** | Conversation structure -- messages, threads, containers |
| **SKOS** | Concept taxonomy -- topics, broader/narrower hierarchies |
| **Dublin Core (dcterms)** | Universal metadata -- dates, titles, creators |
| **Schema.org** | Cherry-pick `SoftwareSourceCode` for code artifacts |

DevKG models two layers:

1. **Structural Layer** -- Sessions, messages, tool calls, code artifacts, agents, and topics. This is the "what happened" layer.
2. **Knowledge Layer** -- Entities and knowledge triples extracted from conversations. This is the "what was learned" layer, where actual `(subject, predicate, object)` relationships live.

The ontology was validated against IBM's GRAPH4CODE project (2B triples), which uses the same composition approach.

---

## 2. Namespace Prefixes

| Prefix | URI | Purpose |
|---|---|---|
| `rdf` | `http://www.w3.org/1999/02/22-rdf-syntax-ns#` | RDF syntax |
| `rdfs` | `http://www.w3.org/2000/01/rdf-schema#` | RDF Schema (labels, comments, subclass) |
| `owl` | `http://www.w3.org/2002/07/owl#` | OWL ontology constructs |
| `xsd` | `http://www.w3.org/2001/XMLSchema#` | XML Schema datatypes (string, date, dateTime) |
| `prov` | `http://www.w3.org/ns/prov#` | W3C Provenance Ontology |
| `sioc` | `http://rdfs.org/sioc/ns#` | Semantically-Interlinked Online Communities |
| `skos` | `http://www.w3.org/2004/02/skos/core#` | Simple Knowledge Organization System |
| `dcterms` | `http://purl.org/dc/terms/` | Dublin Core Metadata Terms |
| `schema` | `http://schema.org/` | Schema.org vocabulary |
| `devkg` | `http://devkg.local/ontology#` | DevKG ontology namespace (T-BOX) |
| `data` | `http://devkg.local/data/` | DevKG instance data namespace (A-BOX) |

---

## 3. Classes (T-BOX)

### Structural Layer

These classes model the observable structure of developer sessions -- the conversation flow, tool usage, and artifacts produced.

| Class | Parent Class(es) | Description |
|---|---|---|
| `devkg:Session` | `prov:Activity`, `sioc:Forum` | A developer working session (e.g., a Claude Code conversation). Dual inheritance: it is both a provenance activity (who, when) and a conversation container (messages inside). |
| `devkg:Message` | `sioc:Post`, `prov:Entity` | A single message within a session. Inherits SIOC post structure (content, creator, container) and PROV entity provenance (derivation, generation). |
| `devkg:UserMessage` | `devkg:Message` | A message authored by the human developer. |
| `devkg:AssistantMessage` | `devkg:Message` | A message generated by an AI assistant. |
| `devkg:ToolCall` | `prov:Activity` | An invocation of a tool (Bash, Read, Write, Grep, etc.) during a session. A sub-activity triggered by an assistant message. |
| `devkg:ToolResult` | `prov:Entity` | The output/result produced by a tool call. |
| `devkg:CodeArtifact` | `prov:Entity`, `schema:SoftwareSourceCode` | A code file or snippet produced or referenced during a session. Dual inheritance gives it both provenance tracking and Schema.org code metadata. |
| `devkg:Developer` | `prov:Agent` | A human developer who participates in sessions. |
| `devkg:AIModel` | `prov:Agent` | An AI model (Claude, GPT, Gemini, etc.) that participates in sessions. |
| `devkg:Topic` | `skos:Concept` | A developer knowledge topic organized in a SKOS taxonomy. Topics form hierarchies via `skos:broader`/`skos:narrower`. |

### Knowledge Layer (Sprint 2)

These classes model the extracted knowledge -- the actual facts and relationships discovered in conversations.

| Class | Parent Class(es) | Description |
|---|---|---|
| `devkg:Entity` | `prov:Entity` | An extracted technical concept or named thing (technology, pattern, tool, platform, problem). Participates in knowledge relationships via the 24 curated predicates. |
| `devkg:KnowledgeTriple` | _(none)_ | A reified triple node for provenance tracking. Links a subject entity to an object entity via a predicate label, and records which message and session the triple was extracted from. |

---

## 4. Structural Properties

### Object Properties

| Property | Domain | Range | Maps to Standard | Description |
|---|---|---|---|---|
| `devkg:hasParentMessage` | `Message` | `Message` | `sioc:reply_of` | Links a message to the message it replies to within a session. |
| `devkg:usedInSession` | _(open)_ | `Session` | -- | Links a message, tool call, or artifact to its containing session. |
| `devkg:mentionsTopic` | _(open)_ | `Topic` | -- | Links a message or artifact to a SKOS topic it discusses. |
| `devkg:producedArtifact` | `prov:Activity` | `CodeArtifact` | `prov:generated` | Links a session or tool call to a code artifact it produced. |
| `devkg:invokedTool` | `AssistantMessage` | `ToolCall` | -- | Links an assistant message to the tool call it triggered. |
| `devkg:hasToolResult` | `ToolCall` | `ToolResult` | `prov:generated` | Links a tool call to its output result. |

### Datatype Properties

| Property | Domain | Range | Description |
|---|---|---|---|
| `devkg:hasMessageId` | `Message` | `xsd:string` | Unique identifier (UUID) of the message. |
| `devkg:hasToolName` | `ToolCall` | `xsd:string` | Name of the tool invoked (Bash, Read, Write, Grep, etc.). |
| `devkg:hasModel` | `AIModel` | `xsd:string` | Model identifier (e.g., `claude-opus-4-6`, `gpt-4o`). |
| `devkg:hasFilePath` | `CodeArtifact` | `xsd:string` | File system path of the code artifact. |
| `devkg:hasSourcePlatform` | `Session` | `xsd:string` | Platform the session originated from (`claude-code`, `chatgpt`, `cursor`, `vscode-copilot`). |

### Inherited Properties (from parent standards)

Because DevKG classes extend PROV-O, SIOC, SKOS, and Dublin Core, the following properties are available without redeclaration:

| Property | From | Used On | Example |
|---|---|---|---|
| `dcterms:created` | Dublin Core | Session, Message | `"2026-02-13T14:30:00Z"^^xsd:dateTime` |
| `dcterms:modified` | Dublin Core | Session | Last modification timestamp |
| `dcterms:title` | Dublin Core | Session | `"Debugging Supabase auth flow"` |
| `sioc:content` | SIOC | Message | The full text content of a message |
| `sioc:has_container` | SIOC | Message | Links message to its Forum (session) |
| `sioc:has_creator` | SIOC | Message | Links message to its author |
| `skos:prefLabel` | SKOS | Topic | `"Authentication"@en` |
| `skos:broader` | SKOS | Topic | Links to parent topic |
| `skos:narrower` | SKOS | Topic | Links to child topic |
| `skos:related` | SKOS | Topic | Cross-links between topics |
| `prov:wasAssociatedWith` | PROV-O | Session | Links session to Developer/AIModel agents |
| `prov:wasGeneratedBy` | PROV-O | Message, CodeArtifact | Links entity to the activity that created it |
| `prov:wasDerivedFrom` | PROV-O | CodeArtifact | Links artifact to the message it came from |

---

## 5. Curated Predicate Vocabulary (24 predicates)

These 24 predicates form the controlled vocabulary for knowledge triple extraction. When an LLM extracts relationships from conversations, it must pick from this list. Five predicates (marked below) are sub-properties of existing standards; the rest are DevKG-native.

### Dependency and Usage

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:uses` | "uses" | -- | X uses technology, tool, or library Y |
| `devkg:dependsOn` | "depends on" | -- | X depends on Y (runtime, build, or logical) |
| `devkg:requires` | "requires" | -- | X requires prerequisite or dependency Y |
| `devkg:builtWith` | "built with" | -- | X is built with technology/framework/language Y |

**Example triples:**
```
data:entity/fastapi  devkg:uses       data:entity/pydantic .
data:entity/fastapi  devkg:dependsOn  data:entity/uvicorn .
data:entity/neo4j    devkg:requires   data:entity/java-runtime .
data:entity/cognee   devkg:builtWith  data:entity/python .
```

### Capability and Purpose

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:enables` | "enables" | -- | X enables capability or feature Y |
| `devkg:provides` | "provides" | -- | X provides capability, service, or feature Y |
| `devkg:solves` | "solves" | -- | X solves problem or addresses challenge Y |
| `devkg:servesAs` | "serves as" | -- | X serves as or acts in the role of Y |

**Example triples:**
```
data:entity/graphiti    devkg:enables   data:entity/temporal-knowledge-tracking .
data:entity/neo4j       devkg:provides  data:entity/native-vector-search .
data:entity/cloudflare-bypass  devkg:solves  data:entity/bot-detection .
data:entity/fuseki      devkg:servesAs  data:entity/sparql-endpoint .
```

### Composition and Structure

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:isPartOf` | "is part of" | `dcterms:isPartOf` | X is a component or part of larger system Y |
| `devkg:hasPart` | "has part" | `dcterms:hasPart` | X has component or sub-part Y |
| `devkg:composesWith` | "composes with" | -- | X composes or combines with Y to form a larger system |
| `devkg:extends` | "extends" | -- | X extends or specializes Y |
| `devkg:implements` | "implements" | -- | X implements pattern, specification, or interface Y |

**Example triples:**
```
data:entity/prov-o     devkg:isPartOf      data:entity/devkg-ontology .
data:entity/devkg      devkg:hasPart        data:entity/structural-layer .
data:entity/sioc       devkg:composesWith   data:entity/prov-o .
data:entity/user-message  devkg:extends     data:entity/message .
data:entity/cognee     devkg:implements     data:entity/knowledge-graph-pipeline .
```

### Deployment and Storage

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:deployedOn` | "deployed on" | -- | X is deployed on platform or infrastructure Y |
| `devkg:storesIn` | "stores in" | -- | X stores data in database or storage system Y |
| `devkg:configures` | "configures" | -- | X configures or parametrizes Y |
| `devkg:queriedWith` | "queried with" | -- | X is queried using language or tool Y |

**Example triples:**
```
data:entity/scraper-api   devkg:deployedOn   data:entity/rockpi .
data:entity/devkg         devkg:storesIn     data:entity/fuseki .
data:entity/env-file      devkg:configures   data:entity/vertex-ai .
data:entity/neo4j         devkg:queriedWith  data:entity/cypher .
```

### Classification and Comparison

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:isTypeOf` | "is type of" | -- | X is a type or kind of Y (taxonomic) |
| `devkg:alternativeTo` | "alternative to" | -- | X is an alternative or substitute for Y |
| `devkg:broader` | "broader" | `skos:broader` | X is a broader concept than Y (generalization) |
| `devkg:narrower` | "narrower" | `skos:narrower` | X is a narrower concept than Y (specialization) |
| `devkg:relatedTo` | "related to" | `skos:related` | X is related to Y (generic fallback) |

**Example triples:**
```
data:entity/graphiti      devkg:isTypeOf       data:entity/knowledge-graph-framework .
data:entity/lightrag      devkg:alternativeTo  data:entity/microsoft-graphrag .
data:entity/programming   devkg:broader        data:entity/web-development .
data:entity/jwt           devkg:narrower       data:entity/authentication .
data:entity/supabase-auth devkg:relatedTo      data:entity/jwt .
```

### Integration

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:integratesWith` | "integrates with" | -- | X integrates with external system or service Y |

**Example triples:**
```
data:entity/langchain  devkg:integratesWith  data:entity/neo4j .
data:entity/graphiti   devkg:integratesWith  data:entity/claude-code .
```

### Output

| Predicate | Label | Maps to Standard | Description |
|---|---|---|---|
| `devkg:produces` | "produces" | -- | X produces output or artifact Y |

**Example triples:**
```
data:entity/tree-sitter  devkg:produces  data:entity/ast .
data:entity/cognee       devkg:produces  data:entity/knowledge-graph .
data:entity/pipeline     devkg:produces  data:entity/rdf-triples .
```

### Summary: 5 Predicates Mapped to Standards

| DevKG Predicate | Parent Standard Property |
|---|---|
| `devkg:isPartOf` | `dcterms:isPartOf` |
| `devkg:hasPart` | `dcterms:hasPart` |
| `devkg:broader` | `skos:broader` |
| `devkg:narrower` | `skos:narrower` |
| `devkg:relatedTo` | `skos:related` |

These sub-property declarations mean SPARQL queries using the standard property (e.g., `dcterms:isPartOf`) will also match `devkg:isPartOf` triples via RDFS inference.

---

## 6. Reification Properties

DevKG uses a **dual storage pattern** for knowledge relationships:

### Pattern 1: Direct Edges (Fast Traversal)

```turtle
data:entity/fastapi  devkg:uses  data:entity/pydantic .
```

Direct `Entity --predicate--> Entity` edges enable simple, fast SPARQL queries. No joins required to ask "what does FastAPI use?"

### Pattern 2: Reified KnowledgeTriple Nodes (Provenance)

```turtle
data:triple/t001 a devkg:KnowledgeTriple ;
    devkg:tripleSubject       data:entity/fastapi ;
    devkg:triplePredicateLabel "uses" ;
    devkg:tripleObject        data:entity/pydantic ;
    devkg:extractedFrom       data:msg/msg-042 ;
    devkg:extractedInSession  data:session/ec11ec1e .
```

The reified node records **where** the fact was learned. This answers questions like "which conversation told us that FastAPI uses Pydantic?"

### Why Both?

| Query Type | Use Pattern |
|---|---|
| "What does X use?" | Direct edge -- single hop |
| "How is X related to Y?" | Direct edge -- path query |
| "Where did we learn that X uses Y?" | Reified triple -- provenance join |
| "What facts did we learn in session Z?" | Reified triple -- filter by session |
| "What facts came from message M?" | Reified triple -- filter by message |

### Reification Properties

| Property | Domain | Range | Description |
|---|---|---|---|
| `devkg:tripleSubject` | `KnowledgeTriple` | `Entity` | The subject entity of the extracted triple |
| `devkg:tripleObject` | `KnowledgeTriple` | `Entity` | The object entity of the extracted triple |
| `devkg:triplePredicateLabel` | `KnowledgeTriple` | `xsd:string` | The predicate name (e.g., `"uses"`, `"dependsOn"`) |
| `devkg:extractedFrom` | `KnowledgeTriple` | `Message` | The source message from which the triple was extracted |
| `devkg:extractedInSession` | `KnowledgeTriple` | `Session` | The session in which the triple was extracted |

---

## 7. T-BOX Examples (Turtle)

### Example A: Technology Enabling a Capability

A conversation discusses how SSH tunnels enable running SQL queries against remote databases.

```turtle
@prefix devkg: <http://devkg.local/ontology#> .
@prefix data:  <http://devkg.local/data/> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

# Entities
data:entity/ssh-tunnel a devkg:Entity ;
    rdfs:label "SSH tunnel" .

data:entity/sql-queries a devkg:Entity ;
    rdfs:label "SQL queries" .

# Direct edge (fast traversal)
data:entity/ssh-tunnel devkg:enables data:entity/sql-queries .

# Reified triple (provenance tracking)
data:triple/t001 a devkg:KnowledgeTriple ;
    devkg:tripleSubject        data:entity/ssh-tunnel ;
    devkg:triplePredicateLabel "enables" ;
    devkg:tripleObject         data:entity/sql-queries ;
    devkg:extractedFrom        data:msg/msg-015 ;
    devkg:extractedInSession   data:session/ec11ec1e .
```

### Example B: Technology Comparison

A conversation compares MyConnect to ngrok, discussing how it works and what problem it solves.

```turtle
@prefix devkg: <http://devkg.local/ontology#> .
@prefix data:  <http://devkg.local/data/> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

# Entities
data:entity/myconnect a devkg:Entity ;
    rdfs:label "MyConnect" .

data:entity/ngrok a devkg:Entity ;
    rdfs:label "ngrok" .

data:entity/websocket a devkg:Entity ;
    rdfs:label "WebSocket" .

data:entity/exposing-service-behind-firewall a devkg:Entity ;
    rdfs:label "exposing service behind firewall" .

# Direct edges -- a mini knowledge graph in 3 triples
data:entity/myconnect devkg:alternativeTo data:entity/ngrok .
data:entity/myconnect devkg:uses          data:entity/websocket .
data:entity/myconnect devkg:solves        data:entity/exposing-service-behind-firewall .
```

This enables queries like:
- "What alternatives exist for ngrok?" -> MyConnect
- "What does MyConnect use?" -> WebSocket
- "What solves the firewall exposure problem?" -> MyConnect

### Example C: Full Session with Structural + Knowledge Layers

This shows how both layers compose in a single graph. A developer asks Claude about Supabase authentication, the assistant invokes tools, and knowledge triples are extracted from the conversation.

```turtle
@prefix devkg:   <http://devkg.local/ontology#> .
@prefix data:    <http://devkg.local/data/> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix prov:    <http://www.w3.org/ns/prov#> .
@prefix sioc:    <http://rdfs.org/sioc/ns#> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix dcterms: <http://purl.org/dc/terms/> .

# ── STRUCTURAL LAYER ──

# Session
data:session/abc123 a devkg:Session ;
    dcterms:title "Debugging Supabase auth flow" ;
    dcterms:created "2026-02-13T14:30:00Z"^^xsd:dateTime ;
    devkg:hasSourcePlatform "claude-code" ;
    prov:wasAssociatedWith data:agent/roberto, data:agent/claude-opus .

# Agents
data:agent/roberto a devkg:Developer ;
    rdfs:label "Roberto" .

data:agent/claude-opus a devkg:AIModel ;
    rdfs:label "Claude Opus" ;
    devkg:hasModel "claude-opus-4-6" .

# User message
data:msg/msg-001 a devkg:UserMessage ;
    devkg:usedInSession data:session/abc123 ;
    devkg:hasMessageId "msg-001" ;
    dcterms:created "2026-02-13T14:30:05Z"^^xsd:dateTime ;
    sioc:content "How do I handle JWT refresh in Supabase?" ;
    sioc:has_creator data:agent/roberto ;
    devkg:mentionsTopic devkg:concept-authentication .

# Assistant message with tool call
data:msg/msg-002 a devkg:AssistantMessage ;
    devkg:usedInSession data:session/abc123 ;
    devkg:hasMessageId "msg-002" ;
    devkg:hasParentMessage data:msg/msg-001 ;
    dcterms:created "2026-02-13T14:30:08Z"^^xsd:dateTime ;
    sioc:content "Let me check the Supabase auth utilities..." ;
    sioc:has_creator data:agent/claude-opus ;
    devkg:invokedTool data:tool/tc-001 .

# Tool call and result
data:tool/tc-001 a devkg:ToolCall ;
    devkg:usedInSession data:session/abc123 ;
    devkg:hasToolName "Read" ;
    dcterms:created "2026-02-13T14:30:09Z"^^xsd:dateTime ;
    devkg:hasToolResult data:tool/tr-001 .

data:tool/tr-001 a devkg:ToolResult ;
    sioc:content "// auth-utils.ts\nexport function refreshToken() { ... }" .

# Code artifact produced
data:artifact/auth-utils a devkg:CodeArtifact ;
    dcterms:title "auth-utils.ts" ;
    devkg:hasFilePath "/src/lib/auth-utils.ts" ;
    devkg:usedInSession data:session/abc123 ;
    prov:wasGeneratedBy data:session/abc123 ;
    prov:wasDerivedFrom data:msg/msg-002 .

# Topic taxonomy
devkg:concept-authentication a devkg:Topic ;
    skos:prefLabel "Authentication"@en ;
    skos:broader devkg:concept-web-development .

# ── KNOWLEDGE LAYER ──

# Entities extracted from this conversation
data:entity/supabase a devkg:Entity ;
    rdfs:label "Supabase" .

data:entity/jwt a devkg:Entity ;
    rdfs:label "JWT" .

data:entity/supabase-auth a devkg:Entity ;
    rdfs:label "Supabase Auth" .

# Direct edges
data:entity/supabase-auth devkg:uses      data:entity/jwt .
data:entity/supabase-auth devkg:isPartOf  data:entity/supabase .
data:entity/supabase      devkg:provides  data:entity/supabase-auth .

# Reified triple with provenance back to the message
data:triple/t010 a devkg:KnowledgeTriple ;
    devkg:tripleSubject        data:entity/supabase-auth ;
    devkg:triplePredicateLabel "uses" ;
    devkg:tripleObject         data:entity/jwt ;
    devkg:extractedFrom        data:msg/msg-001 ;
    devkg:extractedInSession   data:session/abc123 .

data:triple/t011 a devkg:KnowledgeTriple ;
    devkg:tripleSubject        data:entity/supabase-auth ;
    devkg:triplePredicateLabel "isPartOf" ;
    devkg:tripleObject         data:entity/supabase ;
    devkg:extractedFrom        data:msg/msg-002 ;
    devkg:extractedInSession   data:session/abc123 .
```

### Example D: Predicate Mapping to Standards

When `devkg:isPartOf` is declared as `rdfs:subPropertyOf dcterms:isPartOf`, SPARQL engines with RDFS inference will match both:

```turtle
# Ontology declaration (T-BOX)
devkg:isPartOf a owl:ObjectProperty ;
    rdfs:subPropertyOf dcterms:isPartOf ;
    rdfs:label "is part of"@en ;
    rdfs:domain devkg:Entity ;
    rdfs:range devkg:Entity .

# Instance data (A-BOX)
data:entity/prov-o devkg:isPartOf data:entity/devkg-ontology .
```

**What this means for SPARQL:**

```sparql
# Query 1: Using the DevKG predicate (always works)
SELECT ?part WHERE {
  ?part devkg:isPartOf data:entity/devkg-ontology .
}
# Result: data:entity/prov-o

# Query 2: Using the Dublin Core predicate (works with RDFS inference)
SELECT ?part WHERE {
  ?part dcterms:isPartOf data:entity/devkg-ontology .
}
# Result: data:entity/prov-o  (because devkg:isPartOf is a sub-property)
```

The same principle applies to `devkg:broader` / `skos:broader`, `devkg:narrower` / `skos:narrower`, and `devkg:relatedTo` / `skos:related`. This means external tools that understand SKOS or Dublin Core can query DevKG data without knowing about the DevKG vocabulary.

---

## 8. SPARQL Query Patterns

These three query patterns operate on the Knowledge Layer (entities and reified triples). They are the primary way to interrogate extracted knowledge.

### Query 6: What relationships exist for entity X?

Find all facts where a given entity is the subject. Returns the predicate, the object, and a snippet of the source message for provenance.

```sparql
PREFIX rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
PREFIX sioc:  <http://rdfs.org/sioc/ns#>
PREFIX devkg: <http://devkg.local/ontology#>

SELECT ?predicate ?objectLabel ?sourceSnippet
WHERE {
  ?triple rdf:type devkg:KnowledgeTriple ;
          devkg:tripleSubject ?subject ;
          devkg:triplePredicateLabel ?predicate ;
          devkg:tripleObject ?object ;
          devkg:extractedFrom ?sourceMsg .
  ?subject rdfs:label ?subjectLabel .
  ?object rdfs:label ?objectLabel .
  OPTIONAL {
    ?sourceMsg sioc:content ?content .
    BIND(SUBSTR(?content, 1, 120) AS ?sourceSnippet)
  }
  FILTER(LCASE(?subjectLabel) = "prolog")
}
ORDER BY ?predicate
```

**Use case:** "Tell me everything we know about Prolog." Returns rows like:

| predicate | objectLabel | sourceSnippet |
|---|---|---|
| enables | symbolic reasoning | "Prolog enables symbolic reasoning through..." |
| isTypeOf | logic programming language | "Prolog is a logic programming language that..." |
| relatedTo | neurosymbolic AI | "The intersection of Prolog and neural..." |

### Query 7: How does entity X relate to entity Y?

Find the specific relationship(s) between two named entities, with provenance back to the source message.

```sparql
PREFIX rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
PREFIX sioc:  <http://rdfs.org/sioc/ns#>
PREFIX devkg: <http://devkg.local/ontology#>

SELECT ?predicate ?sourceSnippet
WHERE {
  ?triple rdf:type devkg:KnowledgeTriple ;
          devkg:tripleSubject ?subject ;
          devkg:triplePredicateLabel ?predicate ;
          devkg:tripleObject ?object ;
          devkg:extractedFrom ?msg .
  ?subject rdfs:label ?subjectLabel .
  ?object rdfs:label ?objectLabel .
  OPTIONAL {
    ?msg sioc:content ?content .
    BIND(SUBSTR(?content, 1, 120) AS ?sourceSnippet)
  }
  FILTER(LCASE(?subjectLabel) = "prolog" && LCASE(?objectLabel) = "symbolic reasoning")
}
```

**Use case:** "How does Prolog relate to symbolic reasoning?" This directly answers the relationship question that flat tag extraction (Sprint 1) could not.

### Query 8: Entity Co-occurrence

Find which entity pairs appear together most frequently across all extracted triples. Reveals the most discussed relationships in the knowledge base.

```sparql
PREFIX rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs:  <http://www.w3.org/2000/01/rdf-schema#>
PREFIX devkg: <http://devkg.local/ontology#>

SELECT ?label1 ?label2 (COUNT(DISTINCT ?triple) AS ?cooccurrences)
WHERE {
  ?triple rdf:type devkg:KnowledgeTriple ;
          devkg:tripleSubject ?e1 ;
          devkg:tripleObject ?e2 .
  ?e1 rdfs:label ?label1 .
  ?e2 rdfs:label ?label2 .
  FILTER(?e1 != ?e2)
}
GROUP BY ?label1 ?label2
ORDER BY DESC(?cooccurrences)
LIMIT 20
```

**Use case:** "What are the most connected concepts in my knowledge base?" Returns pairs ranked by frequency, revealing the developer's most-discussed technology relationships.

---

## Quick Reference: Ontology at a Glance

```
                    prov:Activity
                         |
                   devkg:Session ──── sioc:Forum
                    /    |    \
                   /     |     \
        devkg:Message  ToolCall  CodeArtifact ── schema:SoftwareSourceCode
           /    \        |
     UserMsg  AssistantMsg
                  |
              invokedTool ──> ToolCall ──hasToolResult──> ToolResult

        prov:Agent
         /      \
   Developer   AIModel

        skos:Concept
             |
         devkg:Topic

        prov:Entity                    (no parent)
             |                              |
        devkg:Entity ──24 predicates──> devkg:Entity
                                            |
                                    devkg:KnowledgeTriple
                                    (reified provenance)
```
